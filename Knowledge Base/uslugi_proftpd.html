<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>ProFTPD - serwer FTP</title>

<style type="text/css">
body {
        font-family: sans-serif,Helvetica;
        font-size: 16px;
        color: #5e5e5e;
        background-color: #fff;
}
div.small {
        font-family: sans-serif,Helvetica;
        font-size: 12px;
        color: #000;
}

div.screen {
        font-family: console, terminal, monospace;
        font-size: 12px;
        color: #000;
	border: 1pt solid #ffe2ab;
	background: #fff8eb;
	padding: 0.5em;
	-moz-border-radius: 10px;
}
h1{
        font-size: 14px;
        color: #003dea;
}
h2, h3 {
  text-align: left;
  color: #003dea;
  background-color: #fff;
  border-bottom: 1px solid #5e5e5e;
  color: #003dea;
  margin: 2em 0 0 0; 
}

h2{
  width: 97%;
  font-size: 20px;
  margin: 0 0 0 3%;
  border-bottom: 2px solid #5e5e5e;
  
}
h3{
  font-size: 18px;
}
p,h2
{
  margin: 1.5em 0 0.5em 0;
}
td table
{
	border-collapse: collapse;
}

div.example {
  background-color: #eee;
  padding: 3px;
}
div.example pre {


}
div.example h6.example {
  width: 100%;
  text-align: center;
  margin: 0px;
  padding: 2px;
}
.index-field{
  background: #fff;
}
.index-field-slected{
  background: #fff;
 
}
.index-field-main{
  background: #fff8eb;
  test-align: center;
}
.tab-norm-field{
  background: #eee;
  border:	1px solid #555;
  font-size:	0.8em;
}
table thead tr td{
font-weight: bold;
}


a {
        text-decoration: none;
        color: #003dea;
}
a:hover {
        text-decoration: none;
        color: #003dea;
}</style></head>
<body><table cellpadding="0" cellspacing="5" width="100%"><tbody><tr>
<td valign="top" width="15%">
<table cellpadding="0" width="100%"><tbody><tr><td align="center" bgcolor="#ffffff"><a href="http://pl.docs.pld-linux.org/index.html"><img alt="Bociek PLD - Pisarz" src="uslugi_proftpd_files/pld-pisarz" border="0" height="124" width="130"></a></td></tr></tbody></table>
<table cellpadding="3" cellspacing="4">
<tbody><tr><td class="index-field-main"><div class="small"><b>I. Informacje podstawowe</b></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/wstep_streszczenie.html">
		Wprowadzenie
	</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/linki_podstawowe.html">Zasoby sieciowe PLD</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/wstep_logo.html">
  Historia powstania naszego logo
  </a></div></td></tr>
<tr><td class="index-field-main"><div class="small"><b>II. Instalacja</b></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/instalacja_wymagania.html">Instalacja systemu</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/instalacja_chroot_wstep.html">Instalacja przy użyciu chroota</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/instalacja_upgrade.html">Aktualizacje</a></div></td></tr>
<tr><td class="index-field-main"><div class="small"><b>III. Podręcznik użytkownika </b></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/podstawy_wstep.html">Podstawy</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/podstawy_ilosc_miejsca.html">Zasoby systemu</a></div></td></tr>
<tr><td class="index-field-main"><div class="small"><b>IV. Podręcznik administratora</b></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/pakiety_wprowadzenie.html">Zarządzanie pakietami</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/bootloader_wstep.html">Bootloader</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/kernel-urzadzenia_kernel.html">Kernel i urządzenia</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/konfiguracja_sysconfig_system.html">Konfiguracja systemu</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/pl_dysk_wstep.html">Pamięci masowe</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/administracja_rescue.html">Administracja</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/pl_siec_wstep.html">Interfejsy sieciowe</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/siec_routing_statyczny.html">Zastosowania sieciowe</a></div></td></tr>
<tr><td class=".index-field-slected">Usługi dostępne w PLD</td></tr>
<tr><td><table>
<tbody><tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_wstep.html">Usługi - wstęp</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_alsa_step.html">ALSA - Dźwięk w Linuksie</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_apache.html">Apache - Serwer stron internetowych</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_named.html">BIND - Serwer Nazw</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_cron.html">CRON - Cykliczne wykonywanie zadań</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_cups.html">CUPS - Popularny system druku dla Uniksa</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_dhcpd.html">DHCPD - Dynamic Host Configuration Protocol Daemon</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_exim.html">Exim - Transport poczty elektronicznej (MTA)</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_heimdal.html">Heimdal - Implementacja protokołu Kerberos</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_jabber2.html">Jabber 2 - Serwer typu Instant Messaging</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_bazydanych__mysql.html">MySQL - System Zarządzania Relacyjnymi Bazami Danych (ang. RDBMS)</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_nfs.html">NFS - Network File System</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_pdns.html">PDNS (Power DNS) - Serwer Nazw</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_postfix.html">Postfix - Transport poczty elektronicznej (MTA)</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_postgresql.html">PostgreSQL - Baza danych SQL</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small">ProFTPD - serwer FTP</div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_samba.html">Samba - współpraca z Windows</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_snort.html">Snort - Sieciowy System Wykrywania Włamań</a></div></td>
</tr>
<tr>
<td align="right" valign="top" width="20"></td>
<td><div class="small"><a href="http://pl.docs.pld-linux.org/uslugi_syslog-ng.html">Syslog-ng</a></div></td>
</tr>
</tbody></table></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/x_wstep.html">X-Window</a></div></td></tr>
<tr><td class="index-field-main"><div class="small"><b>V. Tworzenie PLD - Praktyczny poradnik</b></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/devel_potrzeby.html">Możliwa droga do zostania szeregowym developerem PLD</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/devel_cvs_wstep.html">W krainie CVS - czyli wielki kocioł</a></div></td></tr>
<tr><td class="index-field-main"><div class="small"><b>VI. O podręczniku</b></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/autorzy_polskich_docow.html">
		O podręczniku
	</a></div></td></tr>
<tr><td class="index-field"><div class="small"><a href="http://pl.docs.pld-linux.org/licencja_1_1.html">
		Licencja i prawa autorskie
	</a></div></td></tr>
<tr><td class="index-field-selected" align="left"><small><a href="http://pl.docs.pld-linux.org/bookinfo.html">O tej książce</a></small></td></tr>
<tr><td class="index-field-main" align="left"><small><a href="http://pl.docs.pld-linux.org/toc.html">Spis treści</a></small></td></tr>
<tr><td class="index-field-main"><table>
<tbody><tr><td><b>Inne wersje tego dokumentu</b></td></tr>
<tr><td><small><a href="http://pl.docs.pld-linux.org/pld_dok.pdf">PDF</a></small></td></tr>
<tr><td><small><a href="http://pl.docs.pld-linux.org/pld_dok.html">HTML (jeden plik)</a></small></td></tr>
<tr><td><small><a href="http://pl.docs.pld-linux.org/pld_dok.txt">TXT</a></small></td></tr>
</tbody></table></td></tr>
<tr><td class="index-field-main"><table>
<tbody><tr><td><b>Odnośniki</b></td></tr>
<tr><td><small><a href="http://pl.docs.pld-linux.org/devel_howto.html">Tworzymy dokumentację PLD</a></small></td></tr>
<tr><td><small><a href="http://pld-linux.org/">Strona PLD</a></small></td></tr>
<tr><td><small><a href="http://lists.pld-linux.org/mailman/listinfo">Listy dyskusyjne PLD</a></small></td></tr>
</tbody></table></td></tr>
</tbody></table>
</td>
<td valign="top">
<h2>ProFTPD - serwer FTP</h2>
<div align="right"><table cellpadding="2"><tbody><tr>
<td><a href="http://pl.docs.pld-linux.org/uslugi_postgresql.html"><img src="uslugi_proftpd_files/prev-small" alt="&amp;lt;-" border="0" height="30" width="30"></a></td>
<td><a href="http://pl.docs.pld-linux.org/uslugi_samba.html"><img src="uslugi_proftpd_files/next-small" alt="-&gt;" border="0" height="30" width="30"></a></td>
</tr></tbody></table></div>
<table><tbody><tr>
<td width="3%">&nbsp;</td>
<td>
	
	<h3>Wstęp</h3>
		
	<p>Dużą zaletą <strong>ProFTPD</strong> jest jego prostota. Plik konfiguracyjny demona do złudzenia 
		przypomina ten od <strong>Apache</strong>. Jego zrozumienie nie powinno sprawiać trudności.
	</p>
	

<h3>Instalacja</h3>
	
	<p>
		Zanim przystąpisz do instalacji powinieneś zdecydować w jakim trybie ma pracować usługa.
		Jako demon, czy ma być uruchamiana poprzez superserwer <strong>inetd</strong>. Tryb inetd polega na tym, że proces
		proftpd zostanie uruchomiony dopiero po odebraniu przez inetd żądania o tę
		usługę. Natomiast w trybie daemon ProFTPD jest uruchomiony cały czas i pracuje 
		niezależnie od inetd. Tak więc, jeżeli Twój komputer, który przeznaczysz na serwer
		nie jest zbyt szybki, powinieneś wybrać ProFTPD uruchamianego poprzez inetd. 
		Dystrybucja udostępnia obie te możliwości. Pakiet <tt>proftpd-inetd</tt>
		zapewnia uruchamianie poprzez inetd, natomiast po zainstalowaniu usługi z pakietu
		<tt>proftpd-standalone</tt> uruchamiana ona będzie w trybie daemon.
		W opisie posłużymy się wersją <tt>daemon</tt>. Instalujemy pakiet 
		<tt>proftpd-standalone</tt>
	</p>



<h3>Podstawowa konfiguracja demona</h3>
	
	<p>
		Jak już wspomniałem we wstępie, ProFTPD
		jest jednym z prostszych w konfiguracji programów serwerowych. Wszystkie pliki
		potrzebne do jego skonfigurowania znajdują się w katalogu 
		<i><tt>/etc/ftpd</tt></i>.</p>
	<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre># ls -1 /etc/ftpd
ftpusers
proftpd.conf</pre></div></td></tr></tbody></table></p>
<p>W pliku <i><tt>ftpusers</tt></i> znajduje się lista użytkowników, którym odebrana została
	możliwość logowania się do serwera ftp. Poszczególne pozycje z tej listy zakończone są 
	znakiem nowej linii, tak więc każda pozycja jest rozmieszczona jedna pod drugą. Natomiast 
	plik <i><tt>proftpd.conf</tt></i> zawiera właściwą konfigurację usługi.</p>
<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre>ServerName                      "ProFTPD"
ServerIdent                     off
ServerType                      standalone
DeferWelcome                    off
DefaultServer                   on
DefaultRoot                     ~</pre></div></td></tr></tbody></table></p>
<ul>
	<li>
<p><tt><b>ServerName</b></tt> określa nazwę serwera wyświetlaną łączącym się z nim użytkownikom.</p>
	</li>
	<li>
		<p><tt><b>ServerIdent</b></tt> pozwala na wyświetlenie wiadomości powitalnej
			podczas połączenia, np. zawartości pliku <i><tt>.message</tt></i>.
			Domyślnie wyłączona.</p>
	</li>
	<li>
		<p><tt><b>ServerType</b></tt> ustawia tryb pracy demona ProFTPD</p>
	</li>
	<li>
		<p><tt><b>DeferWelcome</b></tt> Nie pokazuje wiadomości powitalnej dopóki
		użytkownik się nie zautoryzuje.</p>
</li>
<li>
	<p><tt><b>DefaultServer</b></tt> Określamy konfigurację jako domyślną</p>
</li>
<li>
	<p><tt><b>DefaultRoot</b></tt> Wyznaczamy nadrzędny dla każdego użytkownika katalog spoza
		którego nie będzie mógł wyjść. W listingu powyżej będzie to katalog domowy.</p>
</li>
</ul>
<p>Poniżej znajduje się szereg zakomentowanych opcji pozwalających na konfigurację połączeń 
	bezpieczną metodą przy użyciu SSL. Jeżeli jesteś zainteresowany ich użyciem powinieneś 
	zapoznać się z dokumentacją <a href="http://www.proftpd.org/docs/">on line</a> serwera
	ProFTPD. Przechodzimy teraz do dalszej konfiguracji.</p>
<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre>Port                            21
Umask                           022
User                            ftp
Group                           ftp
AuthPAMAuthoritative            on</pre></div></td></tr></tbody></table></p>
<ul>
	<li>
		<p><tt><b>Port</b></tt> Definiujemy tutaj port na którym serwer będzie oczekiwał
		nadchodzących połączeń</p>
</li>
<li>
	<p><tt><b>Umask</b></tt> Tryb umask 022 jest typowym standardem dla ogolnie dostępnych
	                  plików i katalogów</p>
</li>
<li>
	<p><tt><b>User</b></tt> Konto użytkownika na którego uprawnieniach pracuje usługa</p>
</li>
<li>
	<p><tt><b>Group</b></tt> Grupa do której należy konto użytkownika usługi</p>
</li>
<li>
	<p><tt><b>AuthPAMAuthoritative</b></tt> Dajemy możliwość autoryzacji użytkowników poprzez
		moduł PAM jeśli jest to możliwe.</p>
</li>
</ul>

<p>Przedstawione tutaj wartości poszczególnych opcji są domyślnie ustawiane w pliku konfiguracyjnym
	w trakcie instalacji pakietu. Jak najbardziej możesz z nich korzystać. Na pewno nie 
	powinieneś zmieniać takich ustawień jak użytkownik czy grupa, port oraz sposób autoryzacji.</p>




<h3>Konfiguracja dostępu</h3>
	
<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre>&lt;Directory /&gt;
	AllowOverwrite          on
&lt;/Directory&gt;</pre></div></td></tr></tbody></table></p>
<p>Zezwalamy na nadpisywanie plików w obrębie katalogu do którego użytkownik się zaloguje. Poniżej
	w pliku znajduje się przykładowa konfiguracja dla użytkownika anonimowego. Sekcja mieści się
	wewnątrz znacznika <tt><b>&lt;Anonymous ~ftp&gt;&lt;/Anonymous&gt;</b></tt>. 
	Poniższy wykaz omawia najczęściej wykorzystywane dyrektywy w tej sekcji.</p>
<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre>User			ftp
Group			ftp
AnonRequirePassword	off
RequireValidShell	off</pre></div></td></tr></tbody></table></p>
<ul>
	<li>
		<p><tt><b>User</b></tt> - konto użytkownika którego prawa będzie uzyskiwała osoba 
			logująca się do serwera</p>
	</li>
	<li>
		<p><tt><b>Group</b></tt> - grupa do której należy powyższe konto.</p>
	</li>
	<li>
		<p><tt><b>AnonRequirePassword</b></tt> - w powyższym przykładzie wyłączona. 
			Umożliwia użytkownikom anonimowym logowanie się bez hasła.</p>
	</li>
	<li>
		<p><tt><b>RequireValidShell</b></tt> - opcja ta powoduje, że ProFTPD nie sprawdza
			czy dany użytkownik, który się loguje posiada przypisaną w 
			<i><tt>/etc/shells</tt></i> powłokę.</p>
	</li>
</ul>
<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre>UserAlias		anonymous ftp
MaxClients		10
DisplayLogin		welcome.msg
DisplayFirstChdir	.message
AllowStoreRestart 	on</pre></div></td></tr></tbody></table></p>
<ul>
	<li>
		<p><tt><b>UserAlias</b></tt> - przyporządkowuje nazwę użytkownika do systemowego
			konta. W przykładzie anonymous został przypisany kontu ftp.</p>
	</li>
	<li>
		<p><tt><b>MaxClients</b></tt> - ilość jednoczesnych połączeń anonimowych które 
			będą realizowane przez serwer.</p>
	</li>
	<li>
		<p><tt><b>DisplayLogin</b></tt> - określamy plik którego zawartość będzie 
			wyświetlana po starcie.</p>
	</li>
	<li>
		<p><tt><b>DisplayFirstChdir</b></tt> - plik którego zawartość będzie wyświetlana
			po pierwszym wejściu do katalogu.</p>
	</li>
	<li>
		<p><tt><b>AllowStoreRestart</b></tt> - pozwala klientom wznawiać upload.</p>
	</li>
</ul>
<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre>&lt;Limit WRITE&gt;
	DenyAll
&lt;/Limit&gt;</pre></div></td></tr></tbody></table></p>
<p>Zabraniamy klientom pisania do katalogu 
	<i><tt>/home/services/ftp/pub</tt></i>.</p>
<p align="left"><table bgcolor="#ffffff" cellpadding="5" cellspacing="2"><tbody><tr><td><div class="screen"><pre>&lt;Directory /home/services/ftp/pub/Incoming&gt;
	&lt;Limit READ&gt;
		DenyAll
	&lt;/Limit&gt;
	&lt;Limit WRITE&gt;
		AllowAll
	&lt;/Limit&gt;
	&lt;Limit STOR&gt;
		AllowAll
	&lt;/Limit&gt;
&lt;/Directory&gt;</pre></div></td></tr></tbody></table></p>
<p>Katalogowi <i><tt>Incoming</tt></i> zostały precyzyjnie określone prawa dostępu. W 
	powyższym przykładzie każdy ma dostęp do zapisu w tym katalogu natomiast nikt nie posiada 
	prawa do jego odczytywania.</p>



<h3>Zakończenie</h3>
	
<p>Dostęp do serwera ftp możemy ograniczać na kilka sposobów. Można limitować ilość jednoczesnych
	połączeń, stworzyć listę adresów IP, które będą miały prawo do zapisu czy odczytu określonych
	katalogów.</p>
<p>Na tym zakończymy podstawową konfigurację serwera ProFTPD. Więcej informacji na jego temat
	znajdziesz na stronach z jego 
	<a href="http://www.proftpd.org/docs/">dokumentacją</a>.</p>

</td>
<td width="3%">&nbsp;</td>
</tr></tbody></table>
<div align="right"><table cellpadding="2"><tbody><tr>
<td><a href="http://pl.docs.pld-linux.org/uslugi_postgresql.html"><img src="uslugi_proftpd_files/prev-small" alt="&amp;lt;-" border="0" height="30" width="30"></a></td>
<td><a href="http://pl.docs.pld-linux.org/uslugi_samba.html"><img src="uslugi_proftpd_files/next-small" alt="-&gt;" border="0" height="30" width="30"></a></td>
</tr></tbody></table></div>
</td>
</tr></tbody></table></body></html>